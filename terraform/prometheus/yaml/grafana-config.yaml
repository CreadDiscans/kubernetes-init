
apiVersion: v1
kind: Secret
metadata:
  labels:
    app.kubernetes.io/component: grafana
    app.kubernetes.io/name: grafana
    app.kubernetes.io/part-of: kube-prometheus
    app.kubernetes.io/version: 9.5.3
  name: grafana-config
  namespace: monitoring
stringData:
  grafana.ini: |
    [date_formats]
    default_timezone = UTC
    [server]
    root_url = https://${prefix}.${domain}
    [auth]
    disable_login_form = true
    [auth.gitlab]
    enabled = true
    client_id = ${client_id}
    client_secret = ${client_secret}
    auth_url = https://gitlab.${domain}/oauth/authorize
    token_url = https://gitlab.${domain}/oauth/token
    api_url = https://gitlab.${domain}/api/v4
    scopes = openid email profile api
    role_attribute_path: contains(groups[*], 'consoleAdmin') && 'Admin' || 'Viewer'
type: Opaque
